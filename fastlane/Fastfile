ENV["FASTLANE_XCODEBUILD_SETTINGS_TIMEOUT"] = "600"

default_platform(:ios)

platform :ios do
  desc "Deploy a new version for internal testing"
  lane :dev_ios do
    scan(
      device: ENV['SIMULATOR_ID']
    )
    app_store_connect_api_key()
    match(
      type: "appstore",
      platform: "ios",
      readonly: true
    )
    gym(
      scheme: "Cornerstones"
    )
    pilot(
      skip_waiting_for_build_processing: true,
      skip_submission: true
    )
    increment_build_number
  end
end
