ENV["FASTLANE_XCODEBUILD_SETTINGS_TIMEOUT"] = "600"

default_platform(:ios)

platform :ios do
  desc "Deploy a new version for internal testing"
  lane :dev_ios do
    scan(
      device: ENV['SIMULATOR_ID']
    )
    gym(
      scheme: "Cornerstones"
    )
    cert(
      username: "jungik.son@gmail.com"
    )
    sigh(
      app_identifier: "co.lookscope.cornerstones",
      username: "jungik.son@gmail.com",
      type: "appstore"
    )
    # match(type: "appstore", platform: "ios")
    pilot(
      skip_waiting_for_build_processing: true,
      skip_submission: true
    )
    increment_build_number
  end
end
